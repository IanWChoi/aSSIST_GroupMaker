<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>aSSIST GroupMaker</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <link href="https://unpkg.com/vis-network@9.1.2/styles/vis-network.min.css" rel="stylesheet" />
  <script src="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</head>
<body>
  <div class="container">
    <h1 class="title-center clickable-title" onclick="location.reload()">
      aSSIST GroupMaker
    </h1>
    

    <div class="step" id="step1">
      <label for="module">1. 모듈 이름을 입력하세요</label><br />
      <input type="text" id="module" placeholder="예: Business Strategy" />
      <button onclick="nextStep(1)">다음</button>
    </div>

    <div class="step" id="step2" style="display: none">
      <label for="names">2. 학생 이름을 입력하세요 (예: 박선영/임유나/최우석)</label><br />
      <input type="text" id="names" placeholder="이름1/이름2/..." />

      <label for="exclude" style="margin-top: 10px; display: block;">(선택) 같은 조가 되지 않아야 하는 학생 쌍을 입력하세요<br />(예: 임유나-최우석/박선영-노홍연)</label>
      <input type="text" id="exclude" placeholder="이름1-이름2/이름3-이름4" />

      <button onclick="nextStep(2)">다음</button>
    </div>

    <div class="step" id="step3" style="display: none">
      <p>3. 기존 history가 있으신가요?</p>
      <button onclick="handleHistoryUpload()">업로드</button>
      <button onclick="skipHistory()">없음</button>
      <input type="file" id="historyFile" style="display: none" accept=".xlsx" />
    </div>

    <div class="step" id="step4" style="display: none">
      <label for="numGroups">4. 몇 개의 조를 만들까요?</label><br />
      <input type="number" id="numGroups" min="1" />
      <button onclick="runGrouping()">조 편성 시작</button>
    </div>

    <div id="result" style="display: none">
      <div id="captureArea">
        <h2>📋 조편성 결과</h2>
        <div id="moduleDisplay"></div>
        <div id="groupOutput"></div>
      </div>
    
      <button onclick="location.reload()">홈으로</button>
      <button onclick="downloadHistory()">히스토리 다운로드</button>
      <button onclick="captureResult()">결과 공유</button>
      <button onclick="drawNetworkOnDemand()">시각화 보기</button> 
      <div id="scoreOutput" style="display: none;"></div>
      <div id="network" style="width: 100%; height: 600px; margin-top: 40px;"></div> 
    </div>
  </div>

  <img src="assist-logo.png" class="logo-fixed" alt="aSSIST 로고" />
  <script src="script.js"></script>
</body>
</html>
